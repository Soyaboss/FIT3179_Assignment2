{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Average Ridership by Day of Week (Filter by Line + Day Type)"
  },
  "data": {
    "url": "https://raw.githubusercontent.com/Soyaboss/FIT3179_Assignment2/refs/heads/main/data/ridership_lrt_mrt_long_with_days.csv",
    "format": {
      "type": "csv",
      "parse": {"date": "utc:%Y-%m-%d", "ridership": "number"}
    }
  },
  "width": 760,
  "height": 340,
  "params": [
    {
      "name": "linePick",
      "value": "All",
      "bind": {
        "input": "select",
        "name": "Line: ",
        "options": [
          "All",
          "lrt ampang",
          "lrt kajang",
          "mrt kajang",
          "mrt putrajaya"
        ]
      }
    },
    {
      "name": "dayType",
      "value": "All",
      "bind": {
        "input": "select",
        "name": "Day Type: ",
        "options": ["All", "Weekday", "Weekend"]
      }
    }
  ],
  "transform": [
    {"filter": "linePick == 'All' || lower(datum.mode_line) == linePick"},
    {"filter": "dayType == 'All' || datum.type_of_day == dayType"}
  ],
  "mark": {"type": "bar", "cornerRadiusTopLeft": 4, "cornerRadiusTopRight": 4},
  "encoding": {
    "x": {
      "field": "DayOfWeek",
      "type": "ordinal",
      "title": "Day of Week",
      "sort": [
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
        "Sunday"
      ],
      "axis": {"labelAngle": 0}
    },
    "xOffset": {"field": "mode"},
    "y": {
      "aggregate": "mean",
      "field": "ridership",
      "type": "quantitative",
      "title": "Average Ridership"
    },
    "color": {
      "field": "mode",
      "type": "nominal",
      "title": "Mode",
      "scale": {"scheme": "tableau10"}
    },
    "tooltip": [
      {"field": "Day", "type": "ordinal", "title": "Day"},
      {"field": "mode", "type": "nominal", "title": "Mode"},
      {"field": "mode_line", "type": "nominal", "title": "Line"},
      {"field": "TypeOfDay", "type": "nominal", "title": "Day Type"},
      {
        "aggregate": "mean",
        "field": "ridership",
        "type": "quantitative",
        "title": "Avg Ridership",
        "format": ",.0f"
      }
    ]
  },
  "config": {
    "axis": {"labelFontSize": 12, "titleFontSize": 13},
    "legend": {"titleFontSize": 13, "labelFontSize": 12},
    "title": {"fontSize": 16, "font": "Montserrat"}
  }
}